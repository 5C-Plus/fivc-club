import{d as e,v as a,r as t,C as l,o,h as s,w as i,e as d,g as u,a as r,B as n,t as m,x as c,k as p,E as f}from"./index-c922549f.js";/* empty css                        */import{E as y,a as v}from"./el-button-3322aa8d.js";import{E as g}from"./el-dialog-4f02e0ff.js";import"./el-overlay-51fc3bc1.js";import{E as b,a as U}from"./el-form-item-969f14b2.js";import{E as V}from"./el-input-5992562e.js";import{b as _,e as j,f as x}from"./index-186e8914.js";const h={class:"dialog-footer"},w=e({__name:"TransactionCategoryDialog",props:{visible:{type:Boolean,default:!1},clubUuid:{default:""},categoryUuid:{default:""}},emits:["update:visible","created","edited"],setup(e,{emit:w}){const C=e,{t:E}=p(),k=a({get:()=>C.visible,set(e){w("update:visible",e)}}),B={uuid:"",name:"",description:""},F=t({...B});return l(k,(async()=>{await(async()=>{if(k.value)if(C.categoryUuid)try{const e=await x(C.categoryUuid);F.value=e}catch(e){F.value={...B}}else F.value={...B}})()})),(e,a)=>(o(),s(r(g),{modelValue:r(k),"onUpdate:modelValue":a[4]||(a[4]=e=>c(k)?k.value=e:null),title:r(E)("accounting.transactionCategory")},{footer:i((()=>[d("span",h,[u(r(v),null,{default:i((()=>[u(r(y),{onClick:a[2]||(a[2]=e=>k.value=!1)},{default:i((()=>[n(m(r(E)("common.cancel")),1)])),_:1}),u(r(y),{type:"primary",onClick:a[3]||(a[3]=e=>(async()=>{const e={...r(F)};if(C.categoryUuid)try{const a=await _(C.categoryUuid,e);w("edited",r(a))}catch(a){return void f({type:"error",message:E("common.updateFailed")})}else try{e.club=C.clubUuid;const a=await j(e);w("created",r(a))}catch(a){return void f({type:"error",message:E("common.addFailed")})}k.value=!1})())},{default:i((()=>[n(m(r(E)("common.ok")),1)])),_:1})])),_:1})])])),default:i((()=>[u(r(U),{model:F.value,"label-width":"80px",style:{"padding-right":"50px"}},{default:i((()=>[u(r(b),{label:r(E)("common.name")},{default:i((()=>[u(r(V),{modelValue:F.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value.name=e)},null,8,["modelValue"])])),_:1},8,["label"]),u(r(b),{label:r(E)("common.description")},{default:i((()=>[u(r(V),{modelValue:F.value.description,"onUpdate:modelValue":a[1]||(a[1]=e=>F.value.description=e),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"]))}});export{w as _};
