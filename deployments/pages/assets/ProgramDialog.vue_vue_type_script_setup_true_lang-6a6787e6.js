import{d as a,v as e,r as l,C as o,o as t,h as s,w as i,e as m,g as r,a as d,B as u,t as n,x as p,k as c,E as f}from"./index-c922549f.js";/* empty css                        */import{E as v,a as g}from"./el-button-3322aa8d.js";import{E as y}from"./el-dialog-4f02e0ff.js";import"./el-overlay-51fc3bc1.js";import{E as b,a as V}from"./el-form-item-969f14b2.js";import{E as _}from"./el-input-5992562e.js";import{m as U,c as j,g as x}from"./index-ccc23f63.js";const h={class:"dialog-footer"},w=a({__name:"ProgramDialog",props:{visible:{type:Boolean,default:!1},programUuid:{default:""}},emits:["update:visible","created","edited"],setup(a,{emit:w}){const E=a,{t:k}=c(),C=e({get:()=>E.visible,set(a){w("update:visible",a)}}),B={uuid:"",name:"",alias:"",description:""},F=l({...B});return o(C,(async()=>{await(async()=>{if(C.value)if(E.programUuid)try{const a=await x(E.programUuid);F.value=a}catch(a){F.value={...B}}else F.value={...B}})()})),(a,e)=>(t(),s(d(y),{modelValue:d(C),"onUpdate:modelValue":e[5]||(e[5]=a=>p(C)?C.value=a:null),title:d(k)("configs.program")},{footer:i((()=>[m("span",h,[r(d(g),null,{default:i((()=>[r(d(v),{onClick:e[3]||(e[3]=a=>C.value=!1)},{default:i((()=>[u(n(d(k)("common.cancel")),1)])),_:1}),r(d(v),{type:"primary",onClick:e[4]||(e[4]=a=>(async()=>{const a={...d(F)};if(E.programUuid)try{const e=await U(E.programUuid,a);w("edited",d(e))}catch(e){return void f({type:"error",message:k("common.updateFailed")})}else try{const e=await j(a);w("created",d(e))}catch(e){return void f({type:"error",message:k("common.addFailed")})}C.value=!1})())},{default:i((()=>[u(n(d(k)("common.ok")),1)])),_:1})])),_:1})])])),default:i((()=>[r(d(V),{model:F.value,"label-width":"80px",style:{"padding-right":"50px"}},{default:i((()=>[r(d(b),{label:d(k)("common.name")},{default:i((()=>[r(d(_),{modelValue:F.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>F.value.name=a)},null,8,["modelValue"])])),_:1},8,["label"]),r(d(b),{label:d(k)("common.alias")},{default:i((()=>[r(d(_),{modelValue:F.value.alias,"onUpdate:modelValue":e[1]||(e[1]=a=>F.value.alias=a)},null,8,["modelValue"])])),_:1},8,["label"]),r(d(b),{label:d(k)("common.description")},{default:i((()=>[r(d(_),{modelValue:F.value.description,"onUpdate:modelValue":e[2]||(e[2]=a=>F.value.description=a),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"]))}});export{w as _};
