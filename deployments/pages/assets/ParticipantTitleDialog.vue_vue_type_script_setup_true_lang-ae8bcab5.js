import{d as e,v as a,r as l,C as t,o as i,h as o,w as r,e as u,g as s,a as p,B as d,t as n,x as m,k as c,E as v}from"./index-c922549f.js";/* empty css                        */import{E as f,a as _}from"./el-button-3322aa8d.js";import{E as g}from"./el-dialog-4f02e0ff.js";import"./el-overlay-51fc3bc1.js";import{E as y,a as b}from"./el-form-item-969f14b2.js";import{E as j}from"./el-input-number-e9628339.js";import"./el-input-5992562e.js";import{a as U,b as V,e as T}from"./index-cbebeb66.js";import{_ as h}from"./ProgramSelect.vue_vue_type_script_setup_true_lang-dde27cca.js";const w={class:"dialog-footer"},x=e({__name:"ParticipantTitleDialog",props:{visible:{type:Boolean,default:!1},participantUuid:{default:""},participantTitleUuid:{default:""}},emits:["update:visible","created","edited"],setup(e,{emit:x}){const E=e,{t:k}=c(),C=a({get:()=>E.visible,set(e){x("update:visible",e)}}),B={uuid:"",program:"",participant:"",level:null},F=l({...B}),P=l(0);return t(C,(async()=>{await(async()=>{if(C.value)if(E.participantTitleUuid)try{const e=await T(E.participantTitleUuid);F.value=e,P.value=e.level?e.level:0}catch(e){F.value={...B},P.value=0}else F.value={...B},P.value=0})()})),(e,a)=>(i(),o(p(g),{modelValue:p(C),"onUpdate:modelValue":a[4]||(a[4]=e=>m(C)?C.value=e:null),title:p(k)("participants.participantTitle")},{footer:r((()=>[u("span",w,[s(p(_),null,{default:r((()=>[s(p(f),{onClick:a[2]||(a[2]=e=>C.value=!1)},{default:r((()=>[d(n(p(k)("common.cancel")),1)])),_:1}),s(p(f),{type:"primary",onClick:a[3]||(a[3]=e=>(async()=>{const e={...p(F)};if(e.participant=E.participantUuid,e.level=P.value?P.value:null,E.participantTitleUuid)try{const a=await U(E.participantTitleUuid,e);x("edited",p(a))}catch(a){return void v({type:"error",message:k("common.updateFailed")})}else try{const a=await V(e);x("created",p(a))}catch(a){return void v({type:"error",message:k("common.addFailed")})}C.value=!1})())},{default:r((()=>[d(n(p(k)("common.ok")),1)])),_:1})])),_:1})])])),default:r((()=>[s(p(b),{model:F.value,"label-width":"80px",style:{"padding-right":"50px"}},{default:r((()=>[s(p(y),{label:p(k)("common.name")},{default:r((()=>[s(h,{modelValue:F.value.program,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value.program=e)},null,8,["modelValue"])])),_:1},8,["label"]),s(p(y),{label:p(k)("common.level")},{default:r((()=>[s(p(j),{modelValue:P.value,"onUpdate:modelValue":a[1]||(a[1]=e=>P.value=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"]))}});export{x as _};
