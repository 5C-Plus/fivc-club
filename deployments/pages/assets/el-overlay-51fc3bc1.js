import{z as e,aW as t,ah as s,W as n,x as o,aB as i,S as r,av as a,b1 as u,C as d,cg as l,cl as c,cm as p,cn as v,aw as f,U as m,Z as h,d as b,g,O as x,A as y}from"./index-c922549f.js";import{g as k}from"./scroll-2bae90a4.js";import{P as D}from"./vnode-9e1e4265.js";const S=(o,i,r)=>{let a={offsetX:0,offsetY:0};const u=e=>{const t=e.clientX,s=e.clientY,{offsetX:i,offsetY:r}=a,u=o.value.getBoundingClientRect(),d=u.left,l=u.top,c=u.width,p=u.height,v=document.documentElement.clientWidth,f=document.documentElement.clientHeight,m=-d+i,h=-l+r,b=v-d-c+i,g=f-l-p+r,x=e=>{const u=Math.min(Math.max(i+e.clientX-t,m),b),d=Math.min(Math.max(r+e.clientY-s,h),g);a={offsetX:u,offsetY:d},o.value.style.transform=`translate(${n(u)}, ${n(d)})`},y=()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",x),document.addEventListener("mouseup",y)},d=()=>{i.value&&o.value&&i.value.removeEventListener("mousedown",u)};e((()=>{t((()=>{r.value?i.value&&o.value&&i.value.addEventListener("mousedown",u):d()}))})),s((()=>{d()}))},L=(Object.assign,(e,t)=>!Object.is(e,t)
/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/);
/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let w,M,E,T=0;function _(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===j)return;e.globalVersion=j;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!function(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(_(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}(e))return void(e.flags&=-3);const s=w,n=Y;w=e,Y=!0;try{!function(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}(e);const s=e.fn(e._value);(0===t.version||L(s,e._value))&&(e._value=s,t.version++)}catch(o){throw t.version++,o}finally{w=s,Y=n,function(e){let t,s=e.depsTail,n=s;for(;n;){const e=n.prevDep;-1===n.version?(n===s&&(s=e),C(n),A(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=e}e.deps=t,e.depsTail=s}(e),e.flags&=-3}}function C(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let e=s.computed.deps;e;e=e.nextDep)C(e,!0)}t||--s.sc||!s.map||s.map.delete(s.key)}function A(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Y=!0,j=0;class z{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class O{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!w||!Y||w===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==w)t=this.activeLink=new z(w,this),w.deps?(t.prevDep=w.depsTail,w.depsTail.nextDep=t,w.depsTail=t):w.deps=w.depsTail=t,R(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=w.depsTail,t.nextDep=void 0,w.depsTail.nextDep=t,w.depsTail=t,w.deps===t&&(w.deps=e)}return t}trigger(e){this.version++,j++,this.notify(e)}notify(e){T++;try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{!function(){if(--T>0)return;if(E){let e=E;for(E=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;M;){let s=M;for(M=void 0;s;){const n=s.next;if(s.next=void 0,s.flags&=-9,1&s.flags)try{s.trigger()}catch(t){e||(e=t)}s=n}}if(e)throw e}()}}}function R(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)R(e)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}class I{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new O(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=j-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(8&this.flags)&&w!==this)return function(e,t=!1){if(e.flags|=8,t)return e.next=E,void(E=e);e.next=M,M=e}(this,!0),!0}get value(){const e=this.dep.track();return _(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}const X=(e,t={})=>{o(e)||i("[useLockscreen]","You need to pass a ref param to this function");const s=t.ns||r("popup"),n=function(e,t,s=!1){let n,o;return"function"==typeof e?n=e:(n=e.get,o=e.set),new I(n,o,s)}((()=>s.bm("parent","hidden")));if(!a||u(document.body,n.value))return;let f=0,m=!1,h="0";const b=()=>{setTimeout((()=>{v(null==document?void 0:document.body,n.value),m&&document&&(document.body.style.width=h)}),200)};d(e,(e=>{if(!e)return void b();m=!u(document.body,n.value),m&&(h=document.body.style.width),f=k(s.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,o=l(document.body,"overflowY");f>0&&(t||"scroll"===o)&&m&&(document.body.style.width=`calc(100% - ${f}px)`),c(document.body,n.value)})),p((()=>b()))},B=e=>{if(!e)return{onClick:f,onMousedown:f,onMouseup:f};let t=!1,s=!1;return{onClick:n=>{t&&s&&e(n),t=s=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{s=e.target===e.currentTarget}}},H=m({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:h([String,Array,Object])},zIndex:{type:h([String,Number])}});const P=b({name:"ElOverlay",props:H,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:s}){const n=r("overlay"),{onClick:o,onMousedown:i,onMouseup:a}=B(e.customMaskEvent?void 0:e=>{s("click",e)});return()=>e.mask?g("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:o,onMousedown:i,onMouseup:a},[x(t,"default")],D.STYLE|D.CLASS|D.PROPS,["onClick","onMouseup","onMousedown"]):y("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(t,"default")])}});export{P as E,B as a,X as b,S as u};
