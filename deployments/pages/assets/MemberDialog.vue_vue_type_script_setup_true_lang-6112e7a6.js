import{d as e,v as a,r as l,a as t,C as i,o as u,h as r,w as s,c as p,g as o,B as n,t as d,y as m,e as c,x as b,k as v,E as f}from"./index-c922549f.js";/* empty css                        */import{E as y,a as _}from"./el-button-3322aa8d.js";import{E as V}from"./el-dialog-4f02e0ff.js";import"./el-overlay-51fc3bc1.js";import{a as P,E as g}from"./el-form-item-969f14b2.js";import{E as j}from"./el-input-5992562e.js";/* empty css               */import{E as U,a as k}from"./el-select-2d83cd87.js";import"./el-popper-777547bb.js";import{_ as x}from"./ParticipantTable.vue_vue_type_script_setup_true_lang-b8005083.js";import{i as h,j as w,k as E}from"./index-cbebeb66.js";const S={key:0,class:"dialog-footer"},T=e({__name:"MemberDialog",props:{visible:{type:Boolean,default:!1},clubUuid:{default:""},memberUuid:{default:""}},emits:["update:visible","created","edited"],setup(e,{emit:T}){const A=e,{t:M}=v(),C=a({get:()=>A.visible,set(e){T("update:visible",e)}}),B={uuid:"",club:"",participant:"",participant_name:"",participant_intro:"",description:"",type:null},F=l(""),I=l({...B}),R=a((()=>!A.memberUuid&&!t(I).participant)),D=e=>{I.value.participant=e.uuid};return i(C,(async()=>{await(async()=>{if(C.value)if(A.memberUuid)try{const e=await E(A.memberUuid);I.value=e,F.value=e.type||""}catch(e){I.value={...B},F.value=""}else I.value={...B},F.value=""})()})),(e,a)=>(u(),r(t(V),{modelValue:t(C),"onUpdate:modelValue":a[4]||(a[4]=e=>b(C)?C.value=e:null),title:t(M)("participants.member"),width:t(R)?"80%":"50%"},{footer:s((()=>[t(R)?m("",!0):(u(),p("span",S,[o(t(_),null,{default:s((()=>[o(t(y),{onClick:a[2]||(a[2]=e=>C.value=!1)},{default:s((()=>[n(d(t(M)("common.cancel")),1)])),_:1}),o(t(y),{type:"primary",onClick:a[3]||(a[3]=e=>(async()=>{const e={...t(I)};if(e.club=A.clubUuid,e.type=F.value?F.value:null,A.memberUuid)try{const a=await h(A.memberUuid,e);T("edited",t(a))}catch(a){return void f({type:"error",message:M("common.updateFailed")})}else try{const a=await w(e);T("created",t(a))}catch(a){return void f({type:"error",message:M("common.addFailed")})}C.value=!1})())},{default:s((()=>[n(d(t(M)("common.ok")),1)])),_:1})])),_:1})]))])),default:s((()=>[t(R)?(u(),r(x,{key:0,"exclude-club-uuid":A.clubUuid,"is-selecting":!0,onSelect:D},null,8,["exclude-club-uuid"])):m("",!0),t(R)?m("",!0):(u(),r(t(P),{key:1,model:I.value,"label-width":"80px",style:{"padding-right":"50px"}},{default:s((()=>[I.value.participant_name?(u(),r(t(g),{key:0,label:t(M)("common.name")},{default:s((()=>[c("span",null,d(I.value.participant_name),1)])),_:1},8,["label"])):m("",!0),o(t(g),{label:t(M)("participants.memberType")},{default:s((()=>[o(t(U),{modelValue:F.value,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value=e),clearable:""},{default:s((()=>[o(t(k),{value:"President",label:t(M)("participants.President")},null,8,["label"]),o(t(k),{value:"VPE",label:t(M)("participants.VPE")},null,8,["label"]),o(t(k),{value:"VPM",label:t(M)("participants.VPM")},null,8,["label"]),o(t(k),{value:"VPPR",label:t(M)("participants.VPPR")},null,8,["label"]),o(t(k),{value:"Secretary",label:t(M)("participants.Secretary")},null,8,["label"]),o(t(k),{value:"Treasurer",label:t(M)("participants.Treasurer")},null,8,["label"]),o(t(k),{value:"SAA",label:t(M)("participants.SAA")},null,8,["label"]),o(t(k),{value:"IPP",label:t(M)("participants.IPP")},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["label"]),o(t(g),{label:t(M)("common.description")},{default:s((()=>[o(t(j),{modelValue:I.value.description,"onUpdate:modelValue":a[1]||(a[1]=e=>I.value.description=e),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"]))])),_:1},8,["modelValue","title","width"]))}});export{T as _};
