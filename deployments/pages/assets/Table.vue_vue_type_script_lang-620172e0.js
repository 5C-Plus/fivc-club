import{d as e,aq as l,r as a,z as n,a as t,v as r,C as i,K as o,I as d,g as s,a5 as p,s as u}from"./index-c922549f.js";import{E as c,a as g}from"./el-table-column-afd5a8b4.js";import"./el-checkbox-8ac95930.js";/* empty css               */import"./el-tooltip-4ed993c7.js";import"./el-popper-777547bb.js";import{E as f}from"./el-pagination-952f169c.js";import"./el-input-5992562e.js";import"./el-select-2d83cd87.js";import{g as h}from"./tsxHelper-5aa3deb4.js";const v=e({name:"Table",props:{pageSize:l.number.def(10),currentPage:l.number.def(1),selection:l.bool.def(!0),showOverflowTooltip:l.bool.def(!0),columns:{type:Array,default:()=>[]},expand:l.bool.def(!1),pagination:{type:Object,default:()=>{}},reserveSelection:l.bool.def(!1),loading:l.bool.def(!1),reserveIndex:l.bool.def(!1),align:l.string.validate((e=>["left","center","right"].includes(e))).def("left"),headerAlign:l.string.validate((e=>["left","center","right"].includes(e))).def("left"),data:{type:Array,default:()=>[]}},emits:["update:pageSize","update:currentPage","register"],setup(e,{attrs:l,slots:v,emit:m,expose:x}){const b=a();n((()=>{const e=t(b);m("register",null==e?void 0:e.$parent,b)}));const w=a(e.pageSize),j=a(e.currentPage),S=a({}),A=a({}),y=r((()=>{const l={...e};return Object.assign(l,t(A)),l})),z=(e,l)=>{var a;const{columns:n}=t(y);for(const t of l||n)for(const l of e)t.field===l.field?u(t,l.path,l.value):(null==(a=t.children)?void 0:a.length)&&z(e,t.children)},O=a([]),P=e=>{O.value=e};x({setProps:(e={})=>{A.value=Object.assign(t(A),e),S.value=e},setColumn:z,selections:O,elTableRef:b});const T=r((()=>Object.assign({small:!1,background:!1,pagerCount:7,layout:"sizes, prev, pager, next, jumper, ->, total",pageSizes:[10,20,30,40,50,100],disabled:!1,hideOnSinglePage:!1,total:10},t(y).pagination)));i((()=>t(y).pageSize),(e=>{w.value=e})),i((()=>t(y).currentPage),(e=>{j.value=e})),i((()=>w.value),(e=>{m("update:pageSize",e)})),i((()=>j.value),(e=>{m("update:currentPage",e)}));const $=r((()=>{const a={...l,...e};return delete a.columns,delete a.data,a})),C=()=>{const{selection:e,reserveSelection:l,align:a,headerAlign:n}=t(y);return e?s(g,{type:"selection",reserveSelection:l,align:a,headerAlign:n,width:"50"},null):void 0},I=()=>{const{align:e,headerAlign:l,expand:a}=t(y);return a?s(g,{type:"expand",align:e,headerAlign:l},{default:e=>h(v,"expand",e)}):void 0},U=e=>{const{columns:l,reserveIndex:a,pageSize:n,currentPage:r,align:i,headerAlign:o,showOverflowTooltip:d}=t(y);return[I(),C()].concat((e||l).map((e=>{if("index"===e.type)return s(g,{type:"index",index:e.index?e.index:e=>((e,l,a,n)=>{const t=l+1;return e?a*(n-1)+t:t})(a,e,n,r),align:e.align||i,headerAlign:e.headerAlign||o,label:e.label,width:"65px"},null);{const l={...e};return l.children&&delete l.children,s(g,p({showOverflowTooltip:d,align:i,headerAlign:o},l,{prop:e.field}),{default:l=>{var a;return e.children&&e.children.length?(e=>{const{align:l,headerAlign:a,showOverflowTooltip:n}=t(y);return e.map((e=>{const t={...e};return t.children&&delete t.children,s(g,p({showOverflowTooltip:n,align:l,headerAlign:a},t,{prop:e.field}),{default:l=>{var a;return e.children&&e.children.length?U(e.children):h(v,e.field,l)||(null==(a=null==e?void 0:e.formatter)?void 0:a.call(e,l.row,l.column,l.row[e.field],l.$index))||l.row[e.field]},header:h(v,`${e.field}-header`)})}))})(e.children):h(v,e.field,l)||(null==(a=null==e?void 0:e.formatter)?void 0:a.call(e,l.row,l.column,l.row[e.field],l.$index))||l.row[e.field]},header:()=>h(v,`${e.field}-header`)||e.label})}})))};return()=>o(s("div",null,[s(c,p({ref:b,data:t(y).data,"onSelection-change":P},t($)),{default:()=>U(),append:()=>h(v,"append")}),t(y).pagination?s(f,p({pageSize:w.value,"onUpdate:pageSize":e=>w.value=e,currentPage:j.value,"onUpdate:currentPage":e=>j.value=e,class:"mt-10px"},t(T)),null):void 0]),[[d("loading"),t(y).loading]])}});export{v as _};
