import{d as e,v as a,r as l,C as t,o as u,h as s,w as o,e as d,g as i,a as n,B as r,t as m,x as v,k as c,E as p}from"./index-c922549f.js";/* empty css                        */import{E as f,a as b}from"./el-button-3322aa8d.js";import{E as y}from"./el-dialog-4f02e0ff.js";import"./el-overlay-51fc3bc1.js";import{E as g,a as x}from"./el-form-item-969f14b2.js";import{E as V}from"./el-input-5992562e.js";import{a as U,b as _,e as j}from"./index-51cc2b47.js";const E={class:"dialog-footer"},h=e({__name:"VenueDialog",props:{visible:{type:Boolean,default:!1},clubUuid:{default:""},venueUuid:{default:""}},emits:["update:visible","created","edited"],setup(e,{emit:h}){const w=e,{t:k}=c(),C=a({get:()=>w.visible,set(e){h("update:visible",e)}}),B={uuid:"",address:"",external:""},F=l({...B}),A=l("");return t(C,(async()=>{await(async()=>{if(C.value)if(w.venueUuid)try{const e=await j(w.venueUuid);F.value=e,A.value=e.external?e.external:""}catch(e){F.value={...B},A.value=""}else F.value={...B},A.value=""})()})),(e,a)=>(u(),s(n(y),{modelValue:n(C),"onUpdate:modelValue":a[4]||(a[4]=e=>v(C)?C.value=e:null),title:n(k)("meetings.venue")},{footer:o((()=>[d("span",E,[i(n(b),null,{default:o((()=>[i(n(f),{onClick:a[2]||(a[2]=e=>C.value=!1)},{default:o((()=>[r(m(n(k)("common.cancel")),1)])),_:1}),i(n(f),{type:"primary",onClick:a[3]||(a[3]=e=>(async()=>{const e={...n(F)};if(e.club=w.clubUuid,e.external=A.value?A.value:null,w.venueUuid)try{const a=await U(w.venueUuid,e);h("edited",n(a))}catch(a){return void p({type:"error",message:k("common.updateFailed")})}else try{const a=await _(e);h("created",n(a))}catch(a){return void p({type:"error",message:k("common.addFailed")})}C.value=!1})())},{default:o((()=>[r(m(n(k)("common.ok")),1)])),_:1})])),_:1})])])),default:o((()=>[i(n(x),{model:F.value,style:{"padding-right":"50px"}},{default:o((()=>[i(n(g),{label:n(k)("meetings.venueAddress")},{default:o((()=>[i(n(V),{modelValue:F.value.address,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value.address=e),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label"]),i(n(g),{label:n(k)("meetings.venueExternal")},{default:o((()=>[i(n(V),{modelValue:A.value,"onUpdate:modelValue":a[1]||(a[1]=e=>A.value=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"]))}});export{h as _};
