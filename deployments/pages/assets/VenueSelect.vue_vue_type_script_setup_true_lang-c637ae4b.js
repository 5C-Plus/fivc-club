import{d as e,r as a,v as l,C as s,z as u,D as t,o as d,h as o,w as i,c as r,G as c,F as n,a as m,x as p,k as b}from"./index-c922549f.js";import{E as f,a as v}from"./el-select-2d83cd87.js";import"./el-input-5992562e.js";/* empty css               */import"./el-popper-777547bb.js";import{e as h,f as V}from"./index-51cc2b47.js";const y=e({__name:"VenueSelect",props:{modelValue:{default:""},size:{default:"default"},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clubUuid:{default:""}},emits:["update:modelValue"],setup(e,{emit:y}){const g=e,{t:j}=b(),w=a([]),z=a(!1),U=l({get:()=>g.modelValue,set(e){y("update:modelValue",e)}}),_=async(e="")=>{let a=[],l=m(U);const s=l;if(z.value=!0,l)try{const e=await h(l);if(e.club!==g.clubUuid)throw"club changed";a.push(e)}catch(u){l=""}try{const s=(await V({club:g.clubUuid,address_contains:e})).results.filter((e=>e.uuid!==l));a=a.concat(s),g.clearable||l||!a.length||(l=a[0].uuid)}finally{(!s&&l||s&&!l)&&(U.value=l),w.value=a,z.value=!1}};return s((()=>g.clubUuid),(async()=>{await _()})),u((()=>{_()})),t((()=>{_()})),(e,a)=>(d(),o(m(f),{modelValue:m(U),"onUpdate:modelValue":a[0]||(a[0]=e=>p(U)?U.value=e:null),loading:z.value,placeholder:m(j)("meetings.venue"),size:g.size,disabled:g.disabled,clearable:g.clearable,remote:!0,"remote-method":_,filterable:""},{default:i((()=>[(d(!0),r(n,null,c(w.value,(e=>(d(),o(m(v),{key:e.uuid,label:e.address,value:e.uuid},null,8,["label","value"])))),128))])),_:1},8,["modelValue","loading","placeholder","size","disabled","clearable"]))}});export{y as _};
