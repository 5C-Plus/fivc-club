import{d as a,v as e,r as t,C as l,o,h as i,w as u,e as s,g as n,a as d,B as r,t as c,x as m,k as p,E as f}from"./index-c922549f.js";/* empty css                        */import{E as v,a as _}from"./el-button-3322aa8d.js";import{E as b}from"./el-dialog-4f02e0ff.js";import"./el-overlay-51fc3bc1.js";import{E as y,a as g}from"./el-form-item-969f14b2.js";import{E as V}from"./el-input-5992562e.js";import{E as U}from"./el-input-number-e9628339.js";import{E as j}from"./el-date-picker-62bfc5e6.js";import"./el-popper-777547bb.js";import{_ as x}from"./TransactionCategorySelect.vue_vue_type_script_setup_true_lang-b4528ece.js";import{j as h,k as E,n as k}from"./index-186e8914.js";const w=s("span",null,"RMB",-1),C={class:"dialog-footer"},B=a({__name:"TransactionDialog",props:{visible:{type:Boolean,default:!1},clubUuid:{default:""},accountUuid:{default:""},transactionUuid:{default:""}},emits:["update:visible","created","edited"],setup(a,{emit:B}){const S=a,{t:T}=p(),F=e({get:()=>S.visible,set(a){B("update:visible",a)}}),M={uuid:"",description:"",transact_amount:0,transact_time:""},A=t({...M});return l(F,(async()=>{await(async()=>{if(F.value)if(S.transactionUuid)try{const a=await k(S.transactionUuid);A.value=a}catch(a){A.value={...M}}else A.value={...M}})()})),(a,e)=>(o(),i(d(b),{modelValue:d(F),"onUpdate:modelValue":e[6]||(e[6]=a=>m(F)?F.value=a:null),title:d(T)("accounting.transaction")},{footer:u((()=>[s("span",C,[n(d(_),null,{default:u((()=>[n(d(v),{onClick:e[4]||(e[4]=a=>F.value=!1)},{default:u((()=>[r(c(d(T)("common.cancel")),1)])),_:1}),n(d(v),{type:"primary",onClick:e[5]||(e[5]=a=>(async()=>{const a={...d(A)};if(S.transactionUuid)try{const e=await h(S.transactionUuid,a);B("edited",d(e))}catch(e){return void f({type:"error",message:T("common.updateFailed")})}else try{a.account=S.accountUuid;const e=await E(a);B("created",d(e))}catch(e){return void f({type:"error",message:T("common.addFailed")})}F.value=!1})())},{default:u((()=>[r(c(d(T)("common.ok")),1)])),_:1})])),_:1})])])),default:u((()=>[n(d(g),{model:A.value,"label-width":"80px",style:{"padding-right":"50px"}},{default:u((()=>[n(d(y),{label:d(T)("accounting.transactionAmount")},{default:u((()=>[n(d(U),{modelValue:A.value.transact_amount,"onUpdate:modelValue":e[0]||(e[0]=a=>A.value.transact_amount=a),precision:2,disabled:A.value.transact_audited},{suffix:u((()=>[w])),_:1},8,["modelValue","disabled"])])),_:1},8,["label"]),n(d(y),{label:d(T)("accounting.transactionTime")},{default:u((()=>[n(d(j),{modelValue:A.value.transact_time,"onUpdate:modelValue":e[1]||(e[1]=a=>A.value.transact_time=a),disabled:A.value.transact_audited,type:"datetime",placeholder:"Select date and time"},null,8,["modelValue","disabled"])])),_:1},8,["label"]),n(d(y),{label:d(T)("accounting.transactionCategory")},{default:u((()=>[n(x,{modelValue:A.value.category,"onUpdate:modelValue":e[2]||(e[2]=a=>A.value.category=a),"club-uuid":S.clubUuid},null,8,["modelValue","club-uuid"])])),_:1},8,["label"]),n(d(y),{label:d(T)("common.description")},{default:u((()=>[n(d(V),{modelValue:A.value.description,"onUpdate:modelValue":e[3]||(e[3]=a=>A.value.description=a),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"]))}});export{B as _};
