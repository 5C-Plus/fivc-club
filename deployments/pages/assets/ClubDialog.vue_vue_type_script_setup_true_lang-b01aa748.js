import{d as e,v as a,r as l,C as t,o,h as u,w as s,e as i,g as d,a as m,B as n,t as r,x as c,k as p,E as f}from"./index-c922549f.js";/* empty css                        */import{E as v,a as b}from"./el-button-3322aa8d.js";import{E as y}from"./el-dialog-4f02e0ff.js";import"./el-overlay-51fc3bc1.js";import{E as V,a as g}from"./el-form-item-969f14b2.js";import{E as _}from"./el-input-5992562e.js";import{a as U,b as j,e as x}from"./index-ccc23f63.js";const h={class:"dialog-footer"},w=e({__name:"ClubDialog",props:{visible:{type:Boolean,default:!1},clubUuid:{default:""}},emits:["update:visible","created","edited"],setup(e,{emit:w}){const E=e,{t:k}=p(),C=a({get:()=>E.visible,set(e){w("update:visible",e)}}),B={uuid:"",name:"",alias:"",intro:"",picture:null},F=l({...B});return t(C,(async()=>{await(async()=>{if(C.value)if(E.clubUuid)try{const e=await x(E.clubUuid);F.value=e}catch(e){F.value={...B}}else F.value={...B}})()})),(e,a)=>(o(),u(m(y),{modelValue:m(C),"onUpdate:modelValue":a[5]||(a[5]=e=>c(C)?C.value=e:null),title:m(k)("configs.club")},{footer:s((()=>[i("span",h,[d(m(b),null,{default:s((()=>[d(m(v),{onClick:a[3]||(a[3]=e=>C.value=!1)},{default:s((()=>[n(r(m(k)("common.cancel")),1)])),_:1}),d(m(v),{type:"primary",onClick:a[4]||(a[4]=e=>(async()=>{const e={...m(F)};if(E.clubUuid)try{const a=await U(E.clubUuid,e);w("edited",m(a))}catch(a){return void f({type:"error",message:k("common.updateFailed")})}else try{const a=await j(e);w("created",m(a))}catch(a){return void f({type:"error",message:k("common.addFailed")})}C.value=!1})())},{default:s((()=>[n(r(m(k)("common.ok")),1)])),_:1})])),_:1})])])),default:s((()=>[d(m(g),{model:F.value,"label-width":"80px",style:{"padding-right":"50px"}},{default:s((()=>[d(m(V),{label:m(k)("common.name")},{default:s((()=>[d(m(_),{modelValue:F.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value.name=e)},null,8,["modelValue"])])),_:1},8,["label"]),d(m(V),{label:m(k)("common.alias")},{default:s((()=>[d(m(_),{modelValue:F.value.alias,"onUpdate:modelValue":a[1]||(a[1]=e=>F.value.alias=e)},null,8,["modelValue"])])),_:1},8,["label"]),d(m(V),{label:m(k)("common.description")},{default:s((()=>[d(m(_),{modelValue:F.value.intro,"onUpdate:modelValue":a[2]||(a[2]=e=>F.value.intro=e),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"]))}});export{w as _};
