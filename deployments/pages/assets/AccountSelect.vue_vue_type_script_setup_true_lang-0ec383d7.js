import{d as e,r as a,v as l,C as t,z as u,D as s,o,h as d,w as i,c,G as n,F as r,a as m,x as p,k as b}from"./index-c922549f.js";import{E as f,a as v}from"./el-select-2d83cd87.js";import"./el-input-5992562e.js";/* empty css               */import"./el-popper-777547bb.js";import{a as h,l as y}from"./index-186e8914.js";const V=e({__name:"AccountSelect",props:{modelValue:{default:""},size:{default:"default"},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clubUuid:{default:""}},emits:["update:modelValue"],setup(e,{emit:V}){const g=e,{t:j}=b(),w=a([]),z=a(!1),U=l({get:()=>g.modelValue,set(e){V("update:modelValue",e)}}),_=async(e="")=>{let a=[],l=m(U);const t=l;if(z.value=!0,l)try{const e=await h(l);if(e.club!==g.clubUuid)throw"club changed";a.push(e)}catch(u){l=""}try{const t=(await y({club:g.clubUuid,name_contains:e})).results.filter((e=>e.uuid!==l));a=a.concat(t),g.clearable||l||!a.length||(l=a[0].uuid)}finally{(!t&&l||t&&!l)&&(U.value=l),w.value=a,z.value=!1}};return t((()=>g.clubUuid),(async()=>{await _()})),u((()=>{_()})),s((()=>{_()})),(e,a)=>(o(),d(m(f),{modelValue:m(U),"onUpdate:modelValue":a[0]||(a[0]=e=>p(U)?U.value=e:null),loading:z.value,placeholder:m(j)("accounting.account"),size:g.size,disabled:g.disabled,clearable:g.clearable,remote:!0,"remote-method":_,filterable:""},{default:i((()=>[(o(!0),c(r,null,n(w.value,(e=>(o(),d(m(v),{key:e.uuid,label:e.name,value:e.uuid},null,8,["label","value"])))),128))])),_:1},8,["modelValue","loading","placeholder","size","disabled","clearable"]))}});export{V as _};
