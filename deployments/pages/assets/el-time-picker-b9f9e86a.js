import{d as e}from"./utils-627bb44a.js";import{b as a,u as n,d as s,e as t,f as l,c as r,t as o,T as i,g as u,C as c}from"./panel-time-pick-619bf4c7.js";import{bX as p,bY as d,bZ as m,b_ as v,b$ as f,c0 as b,au as g,c1 as h,U as k,Z as S,_ as w,d as A,V,S as _,a7 as y,v as O,r as C,o as R,c as x,e as E,n as T,a as I,t as P,g as j,y as D,a2 as B,a6 as H,a8 as M,a5 as U}from"./index-c922549f.js";import{s as $}from"./isEqual-9f3d5ffd.js";const K=p&&1/$(new p([,-0]))[1]==1/0?function(e){return new p(e)}:function(){};const Y=b((function(e){return function(e,a,n){var s=-1,t=m,l=e.length,r=!0,o=[],i=o;if(n)r=!1,t=v;else if(l>=200){var u=a?null:K(e);if(u)return $(u);r=!1,t=f,i=new d}else i=a?[]:o;e:for(;++s<l;){var c=e[s],p=a?a(c):c;if(c=n||0!==c?c:0,r&&p==p){for(var b=i.length;b--;)if(i[b]===p)continue e;a&&i.push(p),o.push(c)}else t(i,p,n)||(i!==o&&i.push(p),o.push(c))}return o}(g(e,1,h,!0))})),Z=k({...a,parsedValue:{type:S(Array)}}),q=["disabled"];var F=w(A({__name:"panel-time-range",props:Z,emits:["pick","select-range","set-picker-option"],setup(a,{emit:r}){const o=a,i=(e,a)=>{const n=[];for(let s=e;s<=a;s++)n.push(s);return n},{t:u,lang:c}=V(),p=_("time"),d=_("picker"),m=y("EP_PICKER_BASE"),{arrowControl:v,disabledHours:f,disabledMinutes:b,disabledSeconds:g,defaultValue:h}=m.props,k=O((()=>o.parsedValue[0])),S=O((()=>o.parsedValue[1])),w=n(o),A=O((()=>o.format.includes("ss"))),M=O((()=>o.format.includes("A")?"A":o.format.includes("a")?"a":"")),U=e=>{K(e.millisecond(0),S.value)},$=e=>{K(k.value,e.millisecond(0))},K=(e,a)=>{r("pick",[e,a],!0)},Z=O((()=>k.value>S.value)),F=C([0,2]),X=(e,a)=>{r("select-range",e,a,"min"),F.value=[e,a]},z=O((()=>A.value?11:8)),G=(e,a)=>{r("select-range",e,a,"max");const n=I(z);F.value=[e+n,a+n]},J=(e,a)=>{const n=f?f(e):[],s="start"===e,t=(a||(s?S.value:k.value)).hour(),l=s?i(t+1,23):i(0,t-1);return Y(n,l)},L=(e,a,n)=>{const s=b?b(e,a):[],t="start"===a,l=n||(t?S.value:k.value);if(e!==l.hour())return s;const r=l.minute(),o=t?i(r+1,59):i(0,r-1);return Y(s,o)},N=(e,a,n,s)=>{const t=g?g(e,a,n):[],l="start"===n,r=s||(l?S.value:k.value),o=r.hour(),u=r.minute();if(e!==o||a!==u)return t;const c=r.second(),p=l?i(c+1,59):i(0,c-1);return Y(t,p)},Q=([e,a])=>[se(e,"start",!0,a),se(a,"end",!1,e)],{getAvailableHours:W,getAvailableMinutes:ee,getAvailableSeconds:ae}=s(J,L,N),{timePickerOptions:ne,getAvailableTime:se,onSetOption:te}=l({getAvailableHours:W,getAvailableMinutes:ee,getAvailableSeconds:ae});return r("set-picker-option",["formatToString",e=>e?B(e)?e.map((e=>e.format(o.format))):e.format(o.format):null]),r("set-picker-option",["parseUserInput",a=>a?B(a)?a.map((a=>e(a,o.format).locale(c.value))):e(a,o.format).locale(c.value):null]),r("set-picker-option",["isValidValue",a=>{const n=a.map((a=>e(a).locale(c.value))),s=Q(n);return n[0].isSame(s[0])&&n[1].isSame(s[1])}]),r("set-picker-option",["handleKeydownInput",e=>{const a=e.code,{left:n,right:s,up:t,down:l}=H;if([n,s].includes(a)){return(e=>{const a=A.value?[0,3,6,11,14,17]:[0,3,8,11],n=["hours","minutes"].concat(A.value?["seconds"]:[]),s=(a.indexOf(F.value[0])+e+a.length)%a.length,t=a.length/2;s<t?ne.start_emitSelectRange(n[s]):ne.end_emitSelectRange(n[s-t])})(a===n?-1:1),void e.preventDefault()}if([t,l].includes(a)){const n=a===t?-1:1,s=F.value[0]<z.value?"start":"end";return ne[`${s}_scrollDown`](n),void e.preventDefault()}}]),r("set-picker-option",["getDefaultValue",()=>{if(B(h))return h.map((a=>e(a).locale(c.value)));const a=e(h).locale(c.value);return[a,a.add(60,"m")]}]),r("set-picker-option",["getRangeAvailableTime",Q]),(e,a)=>e.actualVisible?(R(),x("div",{key:0,class:T([I(p).b("range-picker"),I(d).b("panel")])},[E("div",{class:T(I(p).be("range-picker","content"))},[E("div",{class:T(I(p).be("range-picker","cell"))},[E("div",{class:T(I(p).be("range-picker","header"))},P(I(u)("el.datepicker.startTime")),3),E("div",{class:T([I(p).be("range-picker","body"),I(p).be("panel","content"),I(p).is("arrow",I(v)),{"has-seconds":I(A)}])},[j(t,{ref:"minSpinner",role:"start","show-seconds":I(A),"am-pm-mode":I(M),"arrow-control":I(v),"spinner-date":I(k),"disabled-hours":J,"disabled-minutes":L,"disabled-seconds":N,onChange:U,onSetOption:I(te),onSelectRange:X},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),E("div",{class:T(I(p).be("range-picker","cell"))},[E("div",{class:T(I(p).be("range-picker","header"))},P(I(u)("el.datepicker.endTime")),3),E("div",{class:T([I(p).be("range-picker","body"),I(p).be("panel","content"),I(p).is("arrow",I(v)),{"has-seconds":I(A)}])},[j(t,{ref:"maxSpinner",role:"end","show-seconds":I(A),"am-pm-mode":I(M),"arrow-control":I(v),"spinner-date":I(S),"disabled-hours":J,"disabled-minutes":L,"disabled-seconds":N,onChange:$,onSetOption:I(te),onSelectRange:G},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),E("div",{class:T(I(p).be("panel","footer"))},[E("button",{type:"button",class:T([I(p).be("panel","btn"),"cancel"]),onClick:a[0]||(a[0]=e=>{r("pick",w.value,!1)})},P(I(u)("el.datepicker.cancel")),3),E("button",{type:"button",class:T([I(p).be("panel","btn"),"confirm"]),disabled:I(Z),onClick:a[1]||(a[1]=e=>((e=!1)=>{r("pick",[k.value,S.value],e)})())},P(I(u)("el.datepicker.confirm")),11,q)],2)],2)):D("v-if",!0)}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);e.extend(r);const X=A({name:"ElTimePicker",install:null,props:{...o,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,a){const n=C(),[s,t]=e.isRange?["timerange",F]:["time",i],l=e=>a.emit("update:modelValue",e);return M("ElPopperOptions",e.popperOptions),a.expose({focus:e=>{var a;null==(a=n.value)||a.handleFocusInput(e)},blur:e=>{var a;null==(a=n.value)||a.handleBlurInput(e)},handleOpen:()=>{var e;null==(e=n.value)||e.handleOpen()},handleClose:()=>{var e;null==(e=n.value)||e.handleClose()}}),()=>{var a;const r=null!=(a=e.format)?a:u;return j(c,U(e,{ref:n,type:s,format:r,"onUpdate:modelValue":l}),{default:e=>j(t,e,null)})}}});X.install=e=>{e.component(X.name,X)};const z=X;export{z as E};
