import{d as e,r as a,C as t,D as s,z as o,H as l,I as n,o as i,h as r,w as m,g as c,a as u,B as p,t as d,K as f,k as g,E as _}from"./index-c922549f.js";import{a as y,E as j}from"./el-button-3322aa8d.js";/* empty css                        */import{E as b}from"./el-card-a447f2d0.js";import{a as w,E as h}from"./el-row-b1864fd0.js";import{E as v}from"./el-message-box-e080817e.js";import"./el-input-5992562e.js";import"./el-overlay-51fc3bc1.js";import{E as x,a as k}from"./el-table-column-afd5a8b4.js";import"./el-checkbox-8ac95930.js";/* empty css               */import"./el-tooltip-4ed993c7.js";import{E}from"./el-popper-777547bb.js";import{v as C,w as S}from"./index-51cc2b47.js";const B=e({__name:"MeetingSessionRoleBindingTable",props:{refreshVersion:{default:0},meetingSessionUuid:{default:""}},emits:["create"],setup(e,{emit:B}){const T=e,{t:U}=g(),M=a([]),V=a(0),D=a(!1),I=a({offset:0,limit:1e3}),K=async()=>{try{if(D.value=!0,!T.meetingSessionUuid)throw"meeting session not specified";const e={meeting_session:T.meetingSessionUuid,...u(I)},a=await C(e);V.value=a.count||0,M.value=a.results}catch(e){V.value=0,M.value=[]}finally{D.value=!1}};return t((()=>T.refreshVersion),(async()=>{await K()})),s((()=>{K()})),o((()=>{K()})),(e,a)=>{const t=l("Icon"),s=n("loading");return i(),r(u(w),null,{default:m((()=>[c(u(h),{span:24},{default:m((()=>[c(u(b),{"body-style":"padding: 0"},{header:m((()=>[c(u(w),null,{default:m((()=>[c(u(y),null,{default:m((()=>[c(u(j),{type:"primary",onClick:a[0]||(a[0]=e=>{B("create")})},{default:m((()=>[p(d(u(U)("exampleDemo.add")),1)])),_:1}),c(u(j),{onClick:a[1]||(a[1]=e=>K())},{default:m((()=>[c(u(E),{content:u(U)("router.search"),placement:"top"},{default:m((()=>[c(t,{icon:"ep:search"})])),_:1},8,["content"])])),_:1})])),_:1})])),_:1})])),default:m((()=>[f((i(),r(u(x),{data:M.value},{default:m((()=>[c(u(k),{label:u(U)("meetings.meetingRole"),align:"center",prop:"meeting_role_title"},null,8,["label"]),c(u(k),{label:u(U)("participants.participant"),align:"center",prop:"meeting_role_participant_name"},null,8,["label"]),c(u(k),{label:u(U)("common.action"),align:"center"},{default:m((({row:e})=>[c(u(y),null,{default:m((()=>[c(u(j),{type:"danger",onClick:a=>(async e=>{try{await v.confirm(U("common.delMessage"),U("common.delWarning"),{confirmButtonText:U("common.ok"),cancelButtonText:U("common.cancel"),type:"warning"})}catch(a){return}try{await S(e.uuid),_({type:"success",message:U("common.delSuccess")})}catch(a){_({type:"error",message:U("common.delFailed")})}await K()})(e)},{default:m((()=>[c(t,{icon:"ep:delete"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:1},8,["label"])])),_:1},8,["data"])),[[s,D.value]])])),_:1})])),_:1})])),_:1})}}});export{B as _};
