import{d as e,v as a,r as t,C as l,o as i,h as o,w as s,e as u,g as n,a as r,B as m,t as d,x as p,k as c,E as g}from"./index-c922549f.js";/* empty css                        */import{E as f,a as v}from"./el-button-3322aa8d.js";import{E as _}from"./el-dialog-4f02e0ff.js";import"./el-overlay-51fc3bc1.js";import{E as y,a as b}from"./el-form-item-969f14b2.js";import{E as j}from"./el-input-5992562e.js";import{i as U,j as V,k as R}from"./index-51cc2b47.js";import{_ as w}from"./ParticipantSelect.vue_vue_type_script_setup_true_lang-a8502586.js";const h={class:"dialog-footer"},k=e({__name:"MeetingRoleDialog",props:{visible:{type:Boolean,default:!1},meetingUuid:{default:""},meetingRoleUuid:{default:""}},emits:["update:visible","created","edited"],setup(e,{emit:k}){const x=e,{t:E}=c(),S=a({get:()=>x.visible,set(e){k("update:visible",e)}}),C={uuid:"",meeting:"",participant:"",title:""},B=t({...C});return l(S,(async()=>{await(async()=>{if(!S.value)return;const e=new Date;if(e.setHours(0),e.setMinutes(0),e.setSeconds(0),x.meetingRoleUuid)try{const e=await R(x.meetingRoleUuid);B.value=e}catch(a){B.value={...C}}else B.value={...C}})()})),(e,a)=>(i(),o(r(_),{modelValue:r(S),"onUpdate:modelValue":a[4]||(a[4]=e=>p(S)?S.value=e:null),title:r(E)("meetings.meetingRole")},{footer:s((()=>[u("span",h,[n(r(v),null,{default:s((()=>[n(r(f),{onClick:a[2]||(a[2]=e=>S.value=!1)},{default:s((()=>[m(d(r(E)("common.cancel")),1)])),_:1}),n(r(f),{type:"primary",onClick:a[3]||(a[3]=e=>(async()=>{const e={...r(B)};if(e.meeting=x.meetingUuid,x.meetingRoleUuid)try{const a=await U(x.meetingRoleUuid,e);k("edited",r(a))}catch(a){return void g({type:"error",message:E("common.updateFailed")})}else try{const a=await V(e);k("created",r(a))}catch(a){return void g({type:"error",message:E("common.addFailed")})}S.value=!1})())},{default:s((()=>[m(d(r(E)("common.ok")),1)])),_:1})])),_:1})])])),default:s((()=>[n(r(b),{model:B.value,style:{"padding-right":"50px"}},{default:s((()=>[n(r(y),{label:r(E)("meetings.meetingRole")},{default:s((()=>[n(r(j),{modelValue:B.value.title,"onUpdate:modelValue":a[0]||(a[0]=e=>B.value.title=e)},null,8,["modelValue"])])),_:1},8,["label"]),n(r(y),{label:r(E)("participants.participant")},{default:s((()=>[n(w,{modelValue:B.value.participant,"onUpdate:modelValue":a[1]||(a[1]=e=>B.value.participant=e),clearable:""},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"]))}});export{k as _};
