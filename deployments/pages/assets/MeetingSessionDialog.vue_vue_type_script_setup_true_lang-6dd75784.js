import{d as e,v as a,r as t,C as l,o,h as s,w as i,e as n,g as u,a as d,B as m,t as r,x as p,k as g,E as c}from"./index-c922549f.js";/* empty css                        */import{E as v,a as f}from"./el-button-3322aa8d.js";import{E as V}from"./el-dialog-4f02e0ff.js";import"./el-overlay-51fc3bc1.js";import{E as h,a as _}from"./el-form-item-969f14b2.js";import{E as b}from"./el-input-5992562e.js";import{E as y}from"./el-time-picker-b9f9e86a.js";import"./el-popper-777547bb.js";import{E as U}from"./el-input-number-e9628339.js";import{E as j}from"./el-switch-6b1b0237.js";import{p as S,q as w,r as E}from"./index-51cc2b47.js";const x={class:"dialog-footer"},k=e({__name:"MeetingSessionDialog",props:{visible:{type:Boolean,default:!1},meetingUuid:{default:""},meetingSessionUuid:{default:""}},emits:["update:visible","created","edited"],setup(e,{emit:k}){const M=e,{t:D}=g(),H=a({get:()=>M.visible,set(e){k("update:visible",e)}}),B={uuid:"",meeting:"",name:"",order:0,duration:"",notes:"",is_highlighted:!1},C=t({...B}),I=t(new Date);return l(H,(async()=>{await(async()=>{if(!H.value)return;const e=new Date;if(e.setHours(0),e.setMinutes(0),e.setSeconds(0),M.meetingSessionUuid)try{const a=await E(M.meetingSessionUuid);C.value=a;const t=a.duration.split(":");e.setHours(parseInt(t[0])),e.setMinutes(parseInt(t[1])),e.setSeconds(parseInt(t[2])),I.value=e}catch(a){C.value={...B},I.value=e}else C.value={...B},I.value=e})()})),(e,a)=>(o(),s(d(V),{modelValue:d(H),"onUpdate:modelValue":a[7]||(a[7]=e=>p(H)?H.value=e:null),title:d(D)("meetings.meetingSession")},{footer:i((()=>[n("span",x,[u(d(f),null,{default:i((()=>[u(d(v),{onClick:a[5]||(a[5]=e=>H.value=!1)},{default:i((()=>[m(r(d(D)("common.cancel")),1)])),_:1}),u(d(v),{type:"primary",onClick:a[6]||(a[6]=e=>(async()=>{const e={...d(C)},a=d(I);if(e.duration=`${a.getHours()}:${a.getMinutes()}:${a.getSeconds()}`,e.meeting=M.meetingUuid,M.meetingSessionUuid)try{const a=await S(M.meetingSessionUuid,e);k("edited",d(a))}catch(t){return void c({type:"error",message:D("common.updateFailed")})}else try{const a=await w(e);k("created",d(a))}catch(t){return void c({type:"error",message:D("common.addFailed")})}H.value=!1})())},{default:i((()=>[m(r(d(D)("common.ok")),1)])),_:1})])),_:1})])])),default:i((()=>[u(d(_),{model:C.value,style:{"padding-right":"50px"}},{default:i((()=>[u(d(h),{label:d(D)("common.name")},{default:i((()=>[u(d(b),{modelValue:C.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value.name=e)},null,8,["modelValue"])])),_:1},8,["label"]),u(d(h),{label:d(D)("meetings.meetingNotes")},{default:i((()=>[u(d(b),{modelValue:C.value.notes,"onUpdate:modelValue":a[1]||(a[1]=e=>C.value.notes=e),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label"]),u(d(h),{label:d(D)("meetings.meetingDuration")},{default:i((()=>[u(d(y),{modelValue:I.value,"onUpdate:modelValue":a[2]||(a[2]=e=>I.value=e)},null,8,["modelValue"])])),_:1},8,["label"]),u(d(h),{label:"Highlighted"},{default:i((()=>[u(d(j),{modelValue:C.value.is_highlighted,"onUpdate:modelValue":a[3]||(a[3]=e=>C.value.is_highlighted=e)},null,8,["modelValue"])])),_:1}),u(d(h),{label:"Order"},{default:i((()=>[u(d(U),{modelValue:C.value.order,"onUpdate:modelValue":a[4]||(a[4]=e=>C.value.order=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]))}});export{k as _};
